<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">


    <title></title>

  </head>
  <body>
    <main id="main" style="text-align:center;padding-top:10.3%">
              <div style="font-size:36px;">Chating </div>
              <div style="font-size:20px;color:#555">一起来！多人匿名聊天</div>
              <div style="text-align:center;margin-top:50px">
                  <div style="margin:0 auto; width:600px;">
                      <div style="margin:0 auto; height:400px; width:600px;border:1px solid rgb(229, 229, 229); overflow-y:scroll">
                          <ul id="messages" style="text-align:left;"></ul>
                      </div>

                      <div style="margin-top:10px;">
                          <form action="" onsubmit="return false;">
                              <p>
                                  <input id="m" class="input-text" autocomplete="off" style="width:388px;
    height: 34px;
    border-radius: 3px;
    border: 1px solid rgb(204, 204, 204);
    padding-left: 10px;" /> </p>
                              <p>
                                  <button class="ui-btn-prop-normal" style="width:160px;">发送</button> <span style="margin-left:30px"><a id="clear-data" class="clear-data" href="javascript:void(0)">清空聊天内容</a></span>
                              </p>
                          </form>


                      </div>
                  </div>

              </div>

          </main>
          <script src = "https://cdn.wilddog.com/js/client/current/wilddog.js" ></script>
          <script src="https://cdn.wilddog.com/www-nd/js/vendor/jquery-1.11.2.min.js"></script>
          <script>

               var ref = new Wilddog("https://wild-boar-25595.wilddogio.com/msg");

               function isNull(str) {
                   if (str == "")
                       return true;
                   var regu = "^[ ]+$";
                   var re = new RegExp(regu);
                   return re.test(str);
               };

               $('form').submit(function() {
                   var msg = $('#m').val() || '';
                   if (isNull(msg)) {
                       return false;
                   }
                   ref.push(msg);
                   $('#m').val('');
                   return false;
               });

               ref.on('child_added', function(snapshot) {
                   var msg = snapshot.val();
                   $('#messages').append($('<li>').text(msg));
                   $("#messages").parent().scrollTop($("#messages").height());
               });

               $('#clear-data').click(function() {
                   ref.remove();
                   $('#messages').empty();
               })
               $(".header-right-ul-li").eq(0).removeClass("index-header-nav-link-selected");

           </script>

  </body>

</html>
